{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\hira sarkar\\\\Desktop\\\\New folder\\\\nextjs-ecommerce\\\\pages\\\\categories.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport Head from 'next/head';\nimport { useContext, useState } from 'react';\nimport { DataContext } from '../store/GlobalState';\nimport { updateItem } from '../store/Actions';\nimport { postData, putData } from \"../utils/fetchData\";\n\nvar Categories = function Categories() {\n  _s();\n\n  var _useState = useState(''),\n      name = _useState[0],\n      setName = _useState[1];\n\n  var _useContext = useContext(DataContext),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var categories = state.categories,\n      auth = state.auth;\n\n  var _useState2 = useState(''),\n      id = _useState2[0],\n      setId = _useState2[1];\n\n  var createCategory = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(auth.user.role !== 'admin')) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: 'Authentication is not vaild.'\n                }\n              }));\n\n            case 2:\n              if (name) {\n                _context.next = 4;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: 'Name can not be left blank.'\n                }\n              }));\n\n            case 4:\n              dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  loading: true\n                }\n              });\n\n              if (!id) {\n                _context.next = 14;\n                break;\n              }\n\n              _context.next = 8;\n              return putData(\"categories/\".concat(id), {\n                name: name\n              }, auth.token);\n\n            case 8:\n              res = _context.sent;\n\n              if (!res.err) {\n                _context.next = 11;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: res.err\n                }\n              }));\n\n            case 11:\n              dispatch(updateItem(categories, id, res.category, 'ADD_CATEGORIES'));\n              _context.next = 20;\n              break;\n\n            case 14:\n              _context.next = 16;\n              return postData('categories', {\n                name: name\n              }, auth.token);\n\n            case 16:\n              res = _context.sent;\n\n              if (!res.err) {\n                _context.next = 19;\n                break;\n              }\n\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  error: res.err\n                }\n              }));\n\n            case 19:\n              dispatch({\n                type: \"ADD_CATEGORIES\",\n                payload: [].concat(_toConsumableArray(categories), [res.newCategory])\n              });\n\n            case 20:\n              setName('');\n              setId('');\n              return _context.abrupt(\"return\", dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  success: res.msg\n                }\n              }));\n\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function createCategory() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleEditCategory = function handleEditCategory(catogory) {\n    setId(catogory._id);\n    setName(catogory.name);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col-md-6 mx-auto my-3\",\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Categories\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-group mb-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        placeholder: \"Add a new category\",\n        value: name,\n        onChange: function onChange(e) {\n          return setName(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-secondary ml-1\",\n        onClick: createCategory,\n        children: id ? \"Update\" : \"Create\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, _this), categories.map(function (catogory) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card my-2 text-capitalize\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body d-flex justify-content-between\",\n          children: [catogory.name, /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              cursor: 'pointer'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-edit mr-2 text-info\",\n              onClick: function onClick() {\n                return handleEditCategory(catogory);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 33\n            }, _this), /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-trash-alt text-danger\",\n              \"data-toggle\": \"modal\",\n              \"data-target\": \"#exampleModal\",\n              onClick: function onClick() {\n                return dispatch({\n                  type: 'ADD_MODAL',\n                  payload: [{\n                    data: categories,\n                    id: catogory._id,\n                    title: catogory.name,\n                    type: 'ADD_CATEGORIES'\n                  }]\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 33\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 29\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 25\n        }, _this)\n      }, catogory._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, _this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(Categories, \"1x28h5k/AnpFo6qZEZSvMfpsw5M=\");\n\n_c = Categories;\nexport default Categories;\n\nvar _c;\n\n$RefreshReg$(_c, \"Categories\");","map":{"version":3,"sources":["C:/Users/hira sarkar/Desktop/New folder/nextjs-ecommerce/pages/categories.js"],"names":["Head","useContext","useState","DataContext","updateItem","postData","putData","Categories","name","setName","state","dispatch","categories","auth","id","setId","createCategory","user","role","type","payload","error","loading","token","res","err","category","newCategory","success","msg","handleEditCategory","catogory","_id","e","target","value","map","cursor","data","title"],"mappings":"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","sourcesContent":["import Head from 'next/head'\r\nimport {useContext, useState} from 'react'\r\nimport {DataContext} from '../store/GlobalState'\r\nimport {updateItem} from '../store/Actions'\r\nimport { postData, putData } from \"../utils/fetchData\";\r\n\r\nconst Categories = () => {\r\n    const [name, setName] = useState('')\r\n\r\n    const {state, dispatch} = useContext(DataContext)\r\n    const {categories, auth} = state\r\n    \r\n    const [id, setId] = useState('')\r\n\r\n    const createCategory = async () => {\r\n        if(auth.user.role !== 'admin')\r\n        return dispatch({type: 'NOTIFY', payload: {error: 'Authentication is not vaild.'}})\r\n\r\n        if(!name) return dispatch({type: 'NOTIFY', payload: {error: 'Name can not be left blank.'}})\r\n\r\n        dispatch({type: 'NOTIFY', payload: {loading: true}})\r\n\r\n        let res;\r\n        if(id){\r\n            res = await putData(`categories/${id}`, {name}, auth.token)\r\n            if(res.err) return dispatch({type: 'NOTIFY', payload: {error: res.err}})\r\n            dispatch(updateItem(categories, id, res.category, 'ADD_CATEGORIES'))\r\n\r\n        }else{\r\n            res = await postData('categories', {name}, auth.token)\r\n            if(res.err) return dispatch({type: 'NOTIFY', payload: {error: res.err}})\r\n            dispatch({type: \"ADD_CATEGORIES\", payload: [...categories, res.newCategory]})\r\n        }\r\n        setName('')\r\n        setId('')\r\n        return dispatch({type: 'NOTIFY', payload: {success: res.msg}})\r\n    }\r\n\r\n    const handleEditCategory = (catogory) => {\r\n        setId(catogory._id)\r\n        setName(catogory.name)\r\n    }\r\n\r\n    return(\r\n        <div className=\"col-md-6 mx-auto my-3\">\r\n            <Head>\r\n                <title>Categories</title>\r\n            </Head>\r\n\r\n            <div className=\"input-group mb-3\">\r\n                <input type=\"text\" className=\"form-control\"\r\n                placeholder=\"Add a new category\" value={name}\r\n                onChange={e => setName(e.target.value)} />\r\n\r\n                <button className=\"btn btn-secondary ml-1\"\r\n                onClick={createCategory}>\r\n                    {id ? \"Update\": \"Create\"}\r\n                </button>\r\n            </div>\r\n\r\n            {\r\n                categories.map(catogory => (\r\n                    <div key={catogory._id} className=\"card my-2 text-capitalize\">\r\n                        <div className=\"card-body d-flex justify-content-between\">\r\n                            {catogory.name}\r\n\r\n                            <div style={{cursor: 'pointer'}}>\r\n                                <i className=\"fas fa-edit mr-2 text-info\"\r\n                                onClick={() => handleEditCategory(catogory)}></i>\r\n\r\n                                <i className=\"fas fa-trash-alt text-danger\"\r\n                                data-toggle=\"modal\" data-target=\"#exampleModal\"\r\n                                onClick={() => dispatch({\r\n                                    type: 'ADD_MODAL',\r\n                                    payload: [{ \r\n                                        data: categories, id: catogory._id, \r\n                                        title: catogory.name, type: 'ADD_CATEGORIES' \r\n                                    }]\r\n                                })} ></i>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                ))\r\n            }\r\n           \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Categories"]},"metadata":{},"sourceType":"module"}