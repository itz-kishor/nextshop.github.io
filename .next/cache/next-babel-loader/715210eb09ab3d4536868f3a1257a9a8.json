{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Link from 'next/link';\nimport PaypalBtn from './paypalBtn';\nimport { patchData } from '../utils/fetchData';\nimport { updateItem } from '../store/Actions';\n\nconst OrderDetail = ({\n  orderDetail,\n  state,\n  dispatch\n}) => {\n  const {\n    auth,\n    orders\n  } = state;\n\n  const handleDelivered = order => {\n    dispatch({\n      type: 'NOTIFY',\n      payload: {\n        loading: true\n      }\n    });\n    patchData(`order/delivered/${order._id}`, null, auth.token).then(res => {\n      if (res.err) return dispatch({\n        type: 'NOTIFY',\n        payload: {\n          error: res.err\n        }\n      });\n      const {\n        paid,\n        dateOfPayment,\n        method,\n        delivered\n      } = res.result;\n      dispatch(updateItem(orders, order._id, _objectSpread(_objectSpread({}, order), {}, {\n        paid,\n        dateOfPayment,\n        method,\n        delivered\n      }), 'ADD_ORDERS'));\n      return dispatch({\n        type: 'NOTIFY',\n        payload: {\n          success: res.msg\n        }\n      });\n    });\n  };\n\n  if (!auth.user) return null;\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: orderDetail.map(order => /*#__PURE__*/_jsxs(\"div\", {\n      style: {\n        margin: '20px auto'\n      },\n      className: \"row justify-content-around\",\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: \"text-uppercase my-3\",\n        style: {\n          maxWidth: '600px'\n        },\n        children: [/*#__PURE__*/_jsxs(\"h2\", {\n          className: \"text-break\",\n          children: [\"Order \", order._id]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"mt-4 text-secondary\",\n          children: [/*#__PURE__*/_jsx(\"h3\", {\n            children: \"Shipping\"\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            children: [\"Name: \", order.user.name]\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            children: [\"Email: \", order.user.email]\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            children: [\"Address: \", order.address]\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            children: [\"Mobile: \", order.mobile]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: `alert ${order.delivered ? 'alert-success' : 'alert-danger'}\n                        d-flex justify-content-between align-items-center`,\n            role: \"alert\",\n            children: [order.delivered ? `Deliverd on ${order.updatedAt}` : 'Not Delivered', auth.user.role === 'admin' && !order.delivered && /*#__PURE__*/_jsx(\"button\", {\n              className: \"btn btn-dark text-uppercase\",\n              onClick: () => handleDelivered(order),\n              children: \"Mark as delivered\"\n            })]\n          }), /*#__PURE__*/_jsx(\"h3\", {\n            children: \"Payment\"\n          }), order.method && /*#__PURE__*/_jsxs(\"h6\", {\n            children: [\"Method: \", /*#__PURE__*/_jsx(\"em\", {\n              children: order.method\n            })]\n          }), order.paymentId && /*#__PURE__*/_jsxs(\"p\", {\n            children: [\"PaymentId: \", /*#__PURE__*/_jsx(\"em\", {\n              children: order.paymentId\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: `alert ${order.paid ? 'alert-success' : 'alert-danger'}\n                        d-flex justify-content-between align-items-center`,\n            role: \"alert\",\n            children: order.paid ? `Paid on ${order.dateOfPayment}` : 'Not Paid'\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            children: [/*#__PURE__*/_jsx(\"h3\", {\n              children: \"Order Items\"\n            }), order.cart.map(item => /*#__PURE__*/_jsxs(\"div\", {\n              className: \"row border-bottom mx-0 p-2 justify-content-betwenn\\r align-items-center\",\n              style: {\n                maxWidth: '550px'\n              },\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: item.images[0].url,\n                alt: item.images[0].url,\n                style: {\n                  width: '50px',\n                  height: '45px',\n                  objectFit: 'cover'\n                }\n              }), /*#__PURE__*/_jsx(\"h5\", {\n                className: \"flex-fill text-secondary px-3 m-0\",\n                children: /*#__PURE__*/_jsx(Link, {\n                  href: `/product/${item._id}`,\n                  children: /*#__PURE__*/_jsx(\"a\", {\n                    children: item.title\n                  })\n                })\n              }), /*#__PURE__*/_jsxs(\"span\", {\n                className: \"text-info m-0\",\n                children: [item.quantity, \" x \\u20B9\", item.price, \" = \\u20B9\", item.price * item.quantity]\n              })]\n            }, item._id))]\n          })]\n        })]\n      }), !order.paid && auth.user.role !== 'admin' && /*#__PURE__*/_jsx(\"div\", {\n        className: \"p-4\",\n        children: /*#__PURE__*/_jsxs(\"h2\", {\n          className: \"mb-4 text-uppercase\",\n          children: [\"Total: \\u20B9\", order.total]\n        })\n      })]\n    }, order._id))\n  });\n};\n\nexport default OrderDetail;","map":null,"metadata":{},"sourceType":"module"}