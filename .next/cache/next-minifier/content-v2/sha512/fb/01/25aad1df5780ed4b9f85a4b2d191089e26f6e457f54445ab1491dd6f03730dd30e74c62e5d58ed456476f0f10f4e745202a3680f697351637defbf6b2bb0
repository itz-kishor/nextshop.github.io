{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[7],{0:function(e,t,a){a(\"GcxT\"),e.exports=a(\"nOHt\")},\"1TCz\":function(e,t,a){\"use strict\";a.r(t);var n=a(\"rePB\"),r=a(\"nKUr\"),s=(a(\"zPlV\"),a(\"q1tI\")),c=a(\"YFqc\"),o=a.n(c),i=a(\"nOHt\"),l=a(\"qG/y\"),d=a(\"p46w\"),b=a.n(d);var j=function(){var e=Object(i.useRouter)(),t=Object(s.useContext)(l.a),a=t.state,n=t.dispatch,c=a.auth,d=a.cart,j=function(t){return t===e.pathname?\" active\":\"\"},u=function(){return b.a.remove(\"refreshtoken\",{path:\"api/auth/accessToken\"}),localStorage.removeItem(\"firstLogin\"),n({type:\"AUTH\",payload:{}}),n({type:\"NOTIFY\",payload:{success:\"Logged out!\"}}),e.push(\"/\")};return Object(r.jsxs)(\"nav\",{className:\"navbar navbar-expand-lg navbar-light bg-light\",children:[Object(r.jsx)(o.a,{href:\"/\",children:Object(r.jsx)(\"a\",{className:\"navbar-brand\",children:\"NextShop\"})}),Object(r.jsx)(\"button\",{className:\"navbar-toggler\",type:\"button\",\"data-toggle\":\"collapse\",\"data-target\":\"#navbarNavDropdown\",\"aria-controls\":\"navbarNavDropdown\",\"aria-expanded\":\"false\",\"aria-label\":\"Toggle navigation\",children:Object(r.jsx)(\"span\",{className:\"navbar-toggler-icon\"})}),Object(r.jsx)(\"div\",{className:\"collapse navbar-collapse justify-content-end\",id:\"navbarNavDropdown\",children:Object(r.jsxs)(\"ul\",{className:\"navbar-nav p-1\",children:[Object(r.jsx)(\"li\",{className:\"nav-item\",children:Object(r.jsx)(o.a,{href:\"/cart\",children:Object(r.jsxs)(\"a\",{className:\"nav-link\"+j(\"/cart\"),children:[Object(r.jsx)(\"i\",{className:\"fas fa-shopping-cart position-relative\",\"aria-hidden\":\"true\",children:Object(r.jsx)(\"span\",{className:\"position-absolute\",style:{padding:\"3px 6px\",background:\"#ed143dc2\",borderRadius:\"50%\",top:\"-10px\",right:\"-10px\",color:\"white\",fontSize:\"14px\"},children:d.length})}),\" Cart\"]})})}),0===Object.keys(c).length?Object(r.jsx)(\"li\",{className:\"nav-item\",children:Object(r.jsx)(o.a,{href:\"/signin\",children:Object(r.jsxs)(\"a\",{className:\"nav-link\"+j(\"/signin\"),children:[Object(r.jsx)(\"i\",{className:\"fas fa-user\",\"aria-hidden\":\"true\"}),\" Sign in\"]})})}):Object(r.jsxs)(\"li\",{className:\"nav-item dropdown\",children:[Object(r.jsxs)(\"a\",{className:\"nav-link dropdown-toggle\",href:\"#\",id:\"navbarDropdownMenuLink\",\"data-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",children:[Object(r.jsx)(\"img\",{src:c.user.avatar,alt:c.user.avatar,style:{borderRadius:\"50%\",width:\"30px\",height:\"30px\",transform:\"translateY(-3px)\",marginRight:\"3px\"}}),\" \",c.user.name]}),Object(r.jsxs)(\"div\",{className:\"dropdown-menu\",\"aria-labelledby\":\"navbarDropdownMenuLink\",children:[Object(r.jsx)(o.a,{href:\"/profile\",children:Object(r.jsx)(\"a\",{className:\"dropdown-item\",children:\"Profile\"})}),\"admin\"===c.user.role&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(o.a,{href:\"/users\",children:Object(r.jsx)(\"a\",{className:\"dropdown-item\",children:\"Users\"})}),Object(r.jsx)(o.a,{href:\"/create\",children:Object(r.jsx)(\"a\",{className:\"dropdown-item\",children:\"Products\"})}),Object(r.jsx)(o.a,{href:\"/categories\",children:Object(r.jsx)(\"a\",{className:\"dropdown-item\",children:\"Categories\"})})]}),Object(r.jsx)(\"div\",{className:\"dropdown-divider\"}),Object(r.jsx)(\"button\",{className:\"dropdown-item\",onClick:u,children:\"Logout\"})]})]})]})})]})},u=function(){return Object(r.jsx)(\"div\",{className:\"position-fixed w-100 h-100 text-center loading\",style:{background:\"#0008\",color:\"white\",top:0,left:0,zIndex:9},children:Object(r.jsxs)(\"svg\",{width:\"205\",height:\"250\",viewBox:\"0 0 40 50\",children:[Object(r.jsx)(\"polygon\",{strokeWidth:\"1\",stroke:\"#fff\",fill:\"none\",points:\"20,1 40,40 1,40\"}),Object(r.jsx)(\"text\",{fill:\"#fff\",x:\"5\",y:\"47\",children:\"Loading\"})]})})},p=function(e){var t=e.msg,a=e.handleShow,n=e.bgColor;return Object(r.jsxs)(\"div\",{className:\"toast show position-fixed text-light \".concat(n),style:{top:\"5px\",right:\"5px\",zIndex:9,minWidth:\"280px\"},children:[Object(r.jsxs)(\"div\",{className:\"toast-header \".concat(n,\" text-light\"),children:[Object(r.jsx)(\"strong\",{className:\"mr-auto text-light\",children:t.title}),Object(r.jsx)(\"button\",{type:\"button\",className:\"ml-2 mb-1 close text-light\",\"data-dismiss\":\"toast\",style:{outline:\"none\"},onClick:a,children:\"x\"})]}),Object(r.jsx)(\"div\",{className:\"toast-body\",children:t.msg})]})},h=function(){var e=Object(s.useContext)(l.a),t=e.state,a=e.dispatch,n=t.notify;return Object(r.jsxs)(r.Fragment,{children:[n.loading&&Object(r.jsx)(u,{}),n.error&&Object(r.jsx)(p,{msg:{msg:n.error,title:\"Error\"},handleShow:function(){return a({type:\"NOTIFY\",payload:{}})},bgColor:\"bg-danger\"}),n.success&&Object(r.jsx)(p,{msg:{msg:n.success,title:\"Success\"},handleShow:function(){return a({type:\"NOTIFY\",payload:{}})},bgColor:\"bg-success\"})]})},O=a(\"WtUO\"),m=a(\"EFaQ\");function x(e,t){var a;if(\"undefined\"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if(\"string\"===typeof e)return f(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);\"Object\"===a&&e.constructor&&(a=e.constructor.name);if(\"Map\"===a||\"Set\"===a)return Array.from(e);if(\"Arguments\"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return f(e,t)}(e))||t&&e&&\"number\"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var s,c=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return c=e.done,e},e:function(e){o=!0,s=e},f:function(){try{c||null==a.return||a.return()}finally{if(o)throw s}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var g=function(){var e=Object(s.useContext)(l.a),t=e.state,a=e.dispatch,n=t.modal,c=t.auth,o=Object(i.useRouter)(),d=function(e){a(Object(O.d)(e.data,e.id,e.type)),Object(m.a)(\"user/\".concat(e.id),c.token).then((function(e){return e.err?a({type:\"NOTIFY\",payload:{error:e.err}}):a({type:\"NOTIFY\",payload:{success:e.msg}})}))},b=function(e){Object(m.a)(\"categories/\".concat(e.id),c.token).then((function(t){return t.err?a({type:\"NOTIFY\",payload:{error:t.err}}):(a(Object(O.d)(e.data,e.id,e.type)),a({type:\"NOTIFY\",payload:{success:t.msg}}))}))},j=function(e){a({type:\"NOTIFY\",payload:{loading:!0}}),Object(m.a)(\"product/\".concat(e.id),c.token).then((function(e){return e.err?a({type:\"NOTIFY\",payload:{error:e.err}}):(a({type:\"NOTIFY\",payload:{success:e.msg}}),o.push(\"/\"))}))};return Object(r.jsx)(\"div\",{className:\"modal fade\",id:\"exampleModal\",tabIndex:\"-1\",role:\"dialog\",\"aria-labelledby\":\"exampleModalLabel\",\"aria-hidden\":\"true\",children:Object(r.jsx)(\"div\",{className:\"modal-dialog\",role:\"document\",children:Object(r.jsxs)(\"div\",{className:\"modal-content\",children:[Object(r.jsxs)(\"div\",{className:\"modal-header\",children:[Object(r.jsx)(\"h5\",{className:\"modal-title text-capitalize\",id:\"exampleModalLabel\",children:0!==n.length&&n[0].title}),Object(r.jsx)(\"button\",{type:\"button\",className:\"close\",\"data-dismiss\":\"modal\",\"aria-label\":\"Close\",children:Object(r.jsx)(\"span\",{\"aria-hidden\":\"true\",children:\"\\xd7\"})})]}),Object(r.jsx)(\"div\",{className:\"modal-body\",children:\"Do you want to delete this item?\"}),Object(r.jsxs)(\"div\",{className:\"modal-footer\",children:[Object(r.jsx)(\"button\",{type:\"button\",className:\"btn btn-secondary\",\"data-dismiss\":\"modal\",onClick:function(){if(0!==n.length){var e,t=x(n);try{for(t.s();!(e=t.n()).done;){var r=e.value;\"ADD_CART\"===r.type&&a(Object(O.d)(r.data,r.id,r.type)),\"ADD_USERS\"===r.type&&d(r),\"ADD_CATEGORIES\"===r.type&&b(r),\"DELETE_PRODUCT\"===r.type&&j(r),a({type:\"ADD_MODAL\",payload:[]})}}catch(s){t.e(s)}finally{t.f()}}},children:\"Yes\"}),Object(r.jsx)(\"button\",{type:\"button\",className:\"btn btn-primary\",\"data-dismiss\":\"modal\",children:\"Cancel\"})]})]})})})};var y=function(e){var t=e.children;return Object(r.jsxs)(\"div\",{className:\"container\",children:[Object(r.jsx)(j,{}),Object(r.jsx)(h,{}),Object(r.jsx)(g,{}),t]})};function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function N(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.default=function(e){var t=e.Component,a=e.pageProps;return Object(r.jsx)(l.b,{children:Object(r.jsx)(y,{children:Object(r.jsx)(t,N({},a))})})}},GcxT:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/_app\",function(){return a(\"1TCz\")}])},zPlV:function(e,t,a){}},[[0,0,2,1,3,5]]]);","extractedComments":[]}